"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/summarize-cluster/route";
exports.ids = ["app/api/summarize-cluster/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsummarize-cluster%2Froute&page=%2Fapi%2Fsummarize-cluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize-cluster%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsummarize-cluster%2Froute&page=%2Fapi%2Fsummarize-cluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize-cluster%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_danie_Documents_Projects_imid_cluster_dashboard_src_app_api_summarize_cluster_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/summarize-cluster/route.ts */ \"(rsc)/./src/app/api/summarize-cluster/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/summarize-cluster/route\",\n        pathname: \"/api/summarize-cluster\",\n        filename: \"route\",\n        bundlePath: \"app/api/summarize-cluster/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\danie\\\\Documents\\\\Projects\\\\imid-cluster-dashboard\\\\src\\\\app\\\\api\\\\summarize-cluster\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_danie_Documents_Projects_imid_cluster_dashboard_src_app_api_summarize_cluster_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/summarize-cluster/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdW1tYXJpemUtY2x1c3RlciUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3VtbWFyaXplLWNsdXN0ZXIlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdW1tYXJpemUtY2x1c3RlciUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNkYW5pZSU1Q0RvY3VtZW50cyU1Q1Byb2plY3RzJTVDaW1pZC1jbHVzdGVyLWRhc2hib2FyZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDZGFuaWUlNUNEb2N1bWVudHMlNUNQcm9qZWN0cyU1Q2ltaWQtY2x1c3Rlci1kYXNoYm9hcmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lEO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1pZC1jbHVzdGVyLWRhc2hib2FyZC8/YWNmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxkYW5pZVxcXFxEb2N1bWVudHNcXFxcUHJvamVjdHNcXFxcaW1pZC1jbHVzdGVyLWRhc2hib2FyZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxzdW1tYXJpemUtY2x1c3RlclxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3VtbWFyaXplLWNsdXN0ZXIvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdW1tYXJpemUtY2x1c3RlclwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc3VtbWFyaXplLWNsdXN0ZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxkYW5pZVxcXFxEb2N1bWVudHNcXFxcUHJvamVjdHNcXFxcaW1pZC1jbHVzdGVyLWRhc2hib2FyZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxzdW1tYXJpemUtY2x1c3RlclxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3VtbWFyaXplLWNsdXN0ZXIvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsummarize-cluster%2Froute&page=%2Fapi%2Fsummarize-cluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize-cluster%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/summarize-cluster/route.ts":
/*!************************************************!*\
  !*** ./src/app/api/summarize-cluster/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dayjs */ \"(rsc)/./node_modules/dayjs/dayjs.min.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n // Using dayjs for easier date calculations\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\nasync function POST(request) {\n    let clusterId;\n    try {\n        const body = await request.json();\n        if (typeof body.clusterId !== \"number\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid clusterId provided. Must be a number.\"\n            }, {\n                status: 400\n            });\n        }\n        clusterId = body.clusterId;\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid request body. Could not parse JSON.\"\n        }, {\n            status: 400\n        });\n    }\n    if (!process.env.GEMINI_API_KEY) {\n        console.error(\"GEMINI_API_KEY is not set in environment variables.\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Server configuration error: Missing API Key.\"\n        }, {\n            status: 500\n        });\n    }\n    try {\n        // 1. Fetch patients in the cluster\n        const patientsInCluster = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].patient.findMany({\n            where: {\n                clusterId: clusterId\n            },\n            select: {\n                id: true,\n                birthdate: true,\n                conditions: {\n                    select: {\n                        description: true\n                    }\n                },\n                medications: {\n                    select: {\n                        description: true\n                    }\n                }\n            }\n        });\n        if (patientsInCluster.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                summary: `No patients found for Cluster ID ${clusterId}.`\n            });\n        }\n        // 2. Calculate aggregated data\n        const patientCount = patientsInCluster.length;\n        // Calculate average age\n        const totalAge = patientsInCluster.reduce((sum, patient)=>{\n            return sum + dayjs__WEBPACK_IMPORTED_MODULE_3___default()().diff(dayjs__WEBPACK_IMPORTED_MODULE_3___default()(patient.birthdate), \"year\");\n        }, 0);\n        const averageAge = patientCount > 0 ? Math.round(totalAge / patientCount) : 0;\n        // Calculate common conditions\n        const conditionCounts = {};\n        patientsInCluster.forEach((p)=>{\n            p.conditions.forEach((c)=>{\n                conditionCounts[c.description] = (conditionCounts[c.description] || 0) + 1;\n            });\n        });\n        const commonConditions = Object.entries(conditionCounts).sort(([, a], [, b])=>b - a).slice(0, 5) // Top 5\n        .map(([desc, count])=>`${desc} (${count} patients)`);\n        // Calculate common medications\n        const medicationCounts = {};\n        patientsInCluster.forEach((p)=>{\n            p.medications.forEach((m)=>{\n                medicationCounts[m.description] = (medicationCounts[m.description] || 0) + 1;\n            });\n        });\n        const commonMedications = Object.entries(medicationCounts).sort(([, a], [, b])=>b - a).slice(0, 5) // Top 5\n        .map(([desc, count])=>`${desc} (${count} patients)`);\n        // 3. Construct prompt for Gemini\n        const prompt = `\r\nSummarize the key characteristics of this patient cluster based on the following data. Focus on demographics, common conditions, and medication patterns. Keep the summary concise (2-3 sentences).\r\n\r\nCluster ID: ${clusterId}\r\nNumber of Patients: ${patientCount}\r\nAverage Age: ${averageAge} years\r\nMost Common Conditions (up to 5): ${commonConditions.join(\", \") || \"N/A\"}\r\nMost Common Medications (up to 5): ${commonMedications.join(\", \") || \"N/A\"}\r\n\r\nSummary:\r\n`;\n        // 4. Call Gemini API\n        // Using gemini-1.5-flash as it's efficient for summarization tasks\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-1.5-flash\"\n        });\n        const result = await model.generateContent(prompt);\n        const response = await result.response;\n        const summary = response.text();\n        // 5. Return summary\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            summary\n        });\n    } catch (error) {\n        console.error(`Error processing cluster ${clusterId}:`, error);\n        // Check if the error is from the Gemini API specifically\n        if (error instanceof Error && error.message.includes(\"API key\")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid API Key or API error.\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate cluster summary.\"\n        }, {\n            status: 500\n        });\n    } finally{\n    // No need to disconnect here as we're using the global instance\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zdW1tYXJpemUtY2x1c3Rlci9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDRjtBQUNrQjtBQUNqQyxDQUFDLDJDQUEyQztBQUV0RSxNQUFNSSxRQUFRLElBQUlGLHFFQUFrQkEsQ0FBQ0csUUFBUUMsR0FBRyxDQUFDQyxjQUFjLElBQUk7QUFFNUQsZUFBZUMsS0FBS0MsT0FBZ0I7SUFDdkMsSUFBSUM7SUFDSixJQUFJO1FBQ0EsTUFBTUMsT0FBTyxNQUFNRixRQUFRRyxJQUFJO1FBQy9CLElBQUksT0FBT0QsS0FBS0QsU0FBUyxLQUFLLFVBQVU7WUFDcEMsT0FBT1YscURBQVlBLENBQUNZLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFnRCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDdkc7UUFDQUosWUFBWUMsS0FBS0QsU0FBUztJQUM5QixFQUFFLE9BQU9HLE9BQU87UUFDWixPQUFPYixxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBOEMsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDckc7SUFFQSxJQUFJLENBQUNULFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxFQUFFO1FBQzdCUSxRQUFRRixLQUFLLENBQUM7UUFDZCxPQUFPYixxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBK0MsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDdEc7SUFFQSxJQUFJO1FBQ0EsbUNBQW1DO1FBQ25DLE1BQU1FLG9CQUFvQixNQUFNZixtREFBTUEsQ0FBQ2dCLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDO1lBQ3BEQyxPQUFPO2dCQUFFVCxXQUFXQTtZQUFVO1lBQzlCVSxRQUFRO2dCQUNKQyxJQUFJO2dCQUNKQyxXQUFXO2dCQUNYQyxZQUFZO29CQUFFSCxRQUFRO3dCQUFFSSxhQUFhO29CQUFLO2dCQUFFO2dCQUM1Q0MsYUFBYTtvQkFBRUwsUUFBUTt3QkFBRUksYUFBYTtvQkFBSztnQkFBRTtZ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TyxDQUFDQyxRQUFRLENBQUMsWUFBWTtZQUM1RCxPQUFPL0QscURBQVlBLENBQUNZLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFnQyxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDeEY7UUFDQSxPQUFPZCxxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBc0MsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDN0YsU0FBVTtJQUNOLGdFQUFnRTtJQUNwRTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1pZC1jbHVzdGVyLWRhc2hib2FyZC8uL3NyYy9hcHAvYXBpL3N1bW1hcml6ZS1jbHVzdGVyL3JvdXRlLnRzP2QxNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgcHJpc21hIGZyb20gJy4uLy4uLy4uL2xpYi9wcmlzbWEnO1xyXG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xyXG5pbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOyAvLyBVc2luZyBkYXlqcyBmb3IgZWFzaWVyIGRhdGUgY2FsY3VsYXRpb25zXHJcblxyXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgJycpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xyXG4gICAgbGV0IGNsdXN0ZXJJZDogbnVtYmVyO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBib2R5LmNsdXN0ZXJJZCAhPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNsdXN0ZXJJZCBwcm92aWRlZC4gTXVzdCBiZSBhIG51bWJlci4nIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsdXN0ZXJJZCA9IGJvZHkuY2x1c3RlcklkO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdCBib2R5LiBDb3VsZCBub3QgcGFyc2UgSlNPTi4nIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dFTUlOSV9BUElfS0VZIGlzIG5vdCBzZXQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnU2VydmVyIGNvbmZpZ3VyYXRpb24gZXJyb3I6IE1pc3NpbmcgQVBJIEtleS4nIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyAxLiBGZXRjaCBwYXRpZW50cyBpbiB0aGUgY2x1c3RlclxyXG4gICAgICAgIGNvbnN0IHBhdGllbnRzSW5DbHVzdGVyID0gYXdhaXQgcHJpc21hLnBhdGllbnQuZmluZE1hbnkoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBjbHVzdGVySWQ6IGNsdXN0ZXJJZCB9LFxyXG4gICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYmlydGhkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uczogeyBzZWxlY3Q6IHsgZGVzY3JpcHRpb246IHRydWUgfSB9LFxyXG4gICAgICAgICAgICAgICAgbWVkaWNhdGlvbnM6IHsgc2VsZWN0OiB7IGRlc2NyaXB0aW9uOiB0cnVlIH0gfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHBhdGllbnRzSW5DbHVzdGVyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdW1tYXJ5OiBgTm8gcGF0aWVudHMgZm91bmQgZm9yIENsdXN0ZXIgSUQgJHtjbHVzdGVySWR9LmAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAyLiBDYWxjdWxhdGUgYWdncmVnYXRlZCBkYXRhXHJcbiAgICAgICAgY29uc3QgcGF0aWVudENvdW50ID0gcGF0aWVudHNJbkNsdXN0ZXIubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgYXZlcmFnZSBhZ2VcclxuICAgICAgICBjb25zdCB0b3RhbEFnZSA9IHBhdGllbnRzSW5DbHVzdGVyLnJlZHVjZSgoc3VtLCBwYXRpZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdW0gKyBkYXlqcygpLmRpZmYoZGF5anMocGF0aWVudC5iaXJ0aGRhdGUpLCAneWVhcicpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VBZ2UgPSBwYXRpZW50Q291bnQgPiAwID8gTWF0aC5yb3VuZCh0b3RhbEFnZSAvIHBhdGllbnRDb3VudCkgOiAwO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgY29tbW9uIGNvbmRpdGlvbnNcclxuICAgICAgICBjb25zdCBjb25kaXRpb25Db3VudHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuICAgICAgICBwYXRpZW50c0luQ2x1c3Rlci5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgICBwLmNvbmRpdGlvbnMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbkNvdW50c1tjLmRlc2NyaXB0aW9uXSA9IChjb25kaXRpb25Db3VudHNbYy5kZXNjcmlwdGlvbl0gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjb21tb25Db25kaXRpb25zID0gT2JqZWN0LmVudHJpZXMoY29uZGl0aW9uQ291bnRzKVxyXG4gICAgICAgICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlcclxuICAgICAgICAgICAgLnNsaWNlKDAsIDUpIC8vIFRvcCA1XHJcbiAgICAgICAgICAgIC5tYXAoKFtkZXNjLCBjb3VudF0pID0+IGAke2Rlc2N9ICgke2NvdW50fSBwYXRpZW50cylgKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGNvbW1vbiBtZWRpY2F0aW9uc1xyXG4gICAgICAgIGNvbnN0IG1lZGljYXRpb25Db3VudHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuICAgICAgICBwYXRpZW50c0luQ2x1c3Rlci5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgICBwLm1lZGljYXRpb25zLmZvckVhY2gobSA9PiB7XHJcbiAgICAgICAgICAgICAgICBtZWRpY2F0aW9uQ291bnRzW20uZGVzY3JpcHRpb25dID0gKG1lZGljYXRpb25Db3VudHNbbS5kZXNjcmlwdGlvbl0gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjb21tb25NZWRpY2F0aW9ucyA9IE9iamVjdC5lbnRyaWVzKG1lZGljYXRpb25Db3VudHMpXHJcbiAgICAgICAgICAgIC5zb3J0KChbLCBhXSwgWywgYl0pID0+IGIgLSBhKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgNSkgLy8gVG9wIDVcclxuICAgICAgICAgICAgLm1hcCgoW2Rlc2MsIGNvdW50XSkgPT4gYCR7ZGVzY30gKCR7Y291bnR9IHBhdGllbnRzKWApO1xyXG5cclxuICAgICAgICAvLyAzLiBDb25zdHJ1Y3QgcHJvbXB0IGZvciBHZW1pbmlcclxuICAgICAgICBjb25zdCBwcm9tcHQgPSBgXHJcblN1bW1hcml6ZSB0aGUga2V5IGNoYXJhY3RlcmlzdGljcyBvZiB0aGlzIHBhdGllbnQgY2x1c3RlciBiYXNlZCBvbiB0aGUgZm9sbG93aW5nIGRhdGEuIEZvY3VzIG9uIGRlbW9ncmFwaGljcywgY29tbW9uIGNvbmRpdGlvbnMsIGFuZCBtZWRpY2F0aW9uIHBhdHRlcm5zLiBLZWVwIHRoZSBzdW1tYXJ5IGNvbmNpc2UgKDItMyBzZW50ZW5jZXMpLlxyXG5cclxuQ2x1c3RlciBJRDogJHtjbHVzdGVySWR9XHJcbk51bWJlciBvZiBQYXRpZW50czogJHtwYXRpZW50Q291bnR9XHJcbkF2ZXJhZ2UgQWdlOiAke2F2ZXJhZ2VBZ2V9IHllYXJzXHJcbk1vc3QgQ29tbW9uIENvbmRpdGlvbnMgKHVwIHRvIDUpOiAke2NvbW1vbkNvbmRpdGlvbnMuam9pbignLCAnKSB8fCAnTi9BJ31cclxuTW9zdCBDb21tb24gTWVkaWNhdGlvbnMgKHVwIHRvIDUpOiAke2NvbW1vbk1lZGljYXRpb25zLmpvaW4oJywgJykgfHwgJ04vQSd9XHJcblxyXG5TdW1tYXJ5OlxyXG5gO1xyXG5cclxuICAgICAgICAvLyA0LiBDYWxsIEdlbWluaSBBUElcclxuICAgICAgICAvLyBVc2luZyBnZW1pbmktMS41LWZsYXNoIGFzIGl0J3MgZWZmaWNpZW50IGZvciBzdW1tYXJpemF0aW9uIHRhc2tzXHJcbiAgICAgICAgY29uc3QgbW9kZWwgPSBnZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogXCJnZW1pbmktMS41LWZsYXNoXCJ9KTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2RlbC5nZW5lcmF0ZUNvbnRlbnQocHJvbXB0KTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5yZXNwb25zZTtcclxuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gcmVzcG9uc2UudGV4dCgpO1xyXG5cclxuICAgICAgICAvLyA1LiBSZXR1cm4gc3VtbWFyeVxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1bW1hcnkgfSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGNsdXN0ZXIgJHtjbHVzdGVySWR9OmAsIGVycm9yKTtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZXJyb3IgaXMgZnJvbSB0aGUgR2VtaW5pIEFQSSBzcGVjaWZpY2FsbHlcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBUEkga2V5JykpIHtcclxuICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBBUEkgS2V5IG9yIEFQSSBlcnJvci4nIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGdlbmVyYXRlIGNsdXN0ZXIgc3VtbWFyeS4nIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIC8vIE5vIG5lZWQgdG8gZGlzY29ubmVjdCBoZXJlIGFzIHdlJ3JlIHVzaW5nIHRoZSBnbG9iYWwgaW5zdGFuY2VcclxuICAgIH1cclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiZGF5anMiLCJnZW5BSSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsIlBPU1QiLCJyZXF1ZXN0IiwiY2x1c3RlcklkIiwiYm9keSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImNvbnNvbGUiLCJwYXRpZW50c0luQ2x1c3RlciIsInBhdGllbnQiLCJmaW5kTWFueSIsIndoZXJlIiwic2VsZWN0IiwiaWQiLCJiaXJ0aGRhdGUiLCJjb25kaXRpb25zIiwiZGVzY3JpcHRpb24iLCJtZWRpY2F0aW9ucyIsImxlbmd0aCIsInN1bW1hcnkiLCJwYXRpZW50Q291bnQiLCJ0b3RhbEFnZSIsInJlZHVjZSIsInN1bSIsImRpZmYiLCJhdmVyYWdlQWdlIiwiTWF0aCIsInJvdW5kIiwiY29uZGl0aW9uQ291bnRzIiwiZm9yRWFjaCIsInAiLCJjIiwiY29tbW9uQ29uZGl0aW9ucyIsIk9iamVjdCIsImVudHJpZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsIm1hcCIsImRlc2MiLCJjb3VudCIsIm1lZGljYXRpb25Db3VudHMiLCJtIiwiY29tbW9uTWVkaWNhdGlvbnMiLCJwcm9tcHQiLCJqb2luIiwibW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJyZXNwb25zZSIsInRleHQiLCJFcnJvciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/summarize-cluster/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst globalForPrisma = global;\n// Use absolute path for database\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_1___default().resolve(process.cwd(), \"prisma/dev.db\");\nconst url = `file:${dbPath}`;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\"\n    ],\n    datasources: {\n        db: {\n            url\n        }\n    }\n});\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkM7QUFDdEI7QUFFdkIsTUFBTUUsa0JBQWtCQztBQUV4QixpQ0FBaUM7QUFDakMsTUFBTUMsU0FBU0gsbURBQVksQ0FBQ0ssUUFBUUMsR0FBRyxJQUFJO0FBQzNDLE1BQU1DLE1BQU0sQ0FBQyxLQUFLLEVBQUVKLE9BQU8sQ0FBQztBQUVyQixNQUFNSyxTQUNYUCxnQkFBZ0JPLE1BQU0sSUFDdEIsSUFBSVQsd0RBQVlBLENBQUM7SUFDZlUsS0FBSztRQUFDO0tBQVE7SUFDZEMsYUFBYTtRQUNYQyxJQUFJO1lBQ0ZKO1FBQ0Y7SUFDRjtBQUNGLEdBQUU7QUFFSixJQUFJRixJQUF5QixFQUFjSixnQkFBZ0JPLE1BQU0sR0FBR0E7QUFFcEUsaUVBQWVBLE1BQU1BLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWlkLWNsdXN0ZXItZGFzaGJvYXJkLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbCBhcyB1bmtub3duIGFzIHsgcHJpc21hOiBQcmlzbWFDbGllbnQgfVxyXG5cclxuLy8gVXNlIGFic29sdXRlIHBhdGggZm9yIGRhdGFiYXNlXHJcbmNvbnN0IGRiUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAncHJpc21hL2Rldi5kYicpXHJcbmNvbnN0IHVybCA9IGBmaWxlOiR7ZGJQYXRofWBcclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHxcclxuICBuZXcgUHJpc21hQ2xpZW50KHtcclxuICAgIGxvZzogWydxdWVyeSddLFxyXG4gICAgZGF0YXNvdXJjZXM6IHtcclxuICAgICAgZGI6IHtcclxuICAgICAgICB1cmwsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH0pXHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcHJpc21hICJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwYXRoIiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwiZGJQYXRoIiwicmVzb2x2ZSIsInByb2Nlc3MiLCJjd2QiLCJ1cmwiLCJwcmlzbWEiLCJsb2ciLCJkYXRhc291cmNlcyIsImRiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@google","vendor-chunks/dayjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsummarize-cluster%2Froute&page=%2Fapi%2Fsummarize-cluster%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize-cluster%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();