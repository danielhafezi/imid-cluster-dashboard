"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/patients/[id]/summarize/route";
exports.ids = ["app/api/patients/[id]/summarize/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&page=%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&page=%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_danie_Documents_Projects_imid_cluster_dashboard_src_app_api_patients_id_summarize_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/patients/[id]/summarize/route.ts */ \"(rsc)/./src/app/api/patients/[id]/summarize/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/patients/[id]/summarize/route\",\n        pathname: \"/api/patients/[id]/summarize\",\n        filename: \"route\",\n        bundlePath: \"app/api/patients/[id]/summarize/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\danie\\\\Documents\\\\Projects\\\\imid-cluster-dashboard\\\\src\\\\app\\\\api\\\\patients\\\\[id]\\\\summarize\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_danie_Documents_Projects_imid_cluster_dashboard_src_app_api_patients_id_summarize_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/patients/[id]/summarize/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwYXRpZW50cyUyRiU1QmlkJTVEJTJGc3VtbWFyaXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwYXRpZW50cyUyRiU1QmlkJTVEJTJGc3VtbWFyaXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcGF0aWVudHMlMkYlNUJpZCU1RCUyRnN1bW1hcml6ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNkYW5pZSU1Q0RvY3VtZW50cyU1Q1Byb2plY3RzJTVDaW1pZC1jbHVzdGVyLWRhc2hib2FyZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDZGFuaWUlNUNEb2N1bWVudHMlNUNQcm9qZWN0cyU1Q2ltaWQtY2x1c3Rlci1kYXNoYm9hcmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lFO0FBQzlJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1pZC1jbHVzdGVyLWRhc2hib2FyZC8/MTQ2NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxkYW5pZVxcXFxEb2N1bWVudHNcXFxcUHJvamVjdHNcXFxcaW1pZC1jbHVzdGVyLWRhc2hib2FyZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxwYXRpZW50c1xcXFxbaWRdXFxcXHN1bW1hcml6ZVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGF0aWVudHMvW2lkXS9zdW1tYXJpemUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wYXRpZW50cy9baWRdL3N1bW1hcml6ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGF0aWVudHMvW2lkXS9zdW1tYXJpemUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxkYW5pZVxcXFxEb2N1bWVudHNcXFxcUHJvamVjdHNcXFxcaW1pZC1jbHVzdGVyLWRhc2hib2FyZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxwYXRpZW50c1xcXFxbaWRdXFxcXHN1bW1hcml6ZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcGF0aWVudHMvW2lkXS9zdW1tYXJpemUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&page=%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/patients/[id]/summarize/route.ts":
/*!******************************************************!*\
  !*** ./src/app/api/patients/[id]/summarize/route.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dayjs */ \"(rsc)/./node_modules/dayjs/dayjs.min.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\nasync function GET(request, { params }) {\n    const { id } = params;\n    if (!process.env.GEMINI_API_KEY) {\n        console.error(\"GEMINI_API_KEY is not set in environment variables.\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Server configuration error: Missing API Key.\"\n        }, {\n            status: 500\n        });\n    }\n    try {\n        // Fetch detailed patient data including conditions, medications, and encounters\n        const patient = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].patient.findUnique({\n            where: {\n                id\n            },\n            include: {\n                conditions: true,\n                medications: true,\n                encounters: true\n            }\n        });\n        if (!patient) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Patient not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Calculate patient age\n        const age = dayjs__WEBPACK_IMPORTED_MODULE_3___default()().diff(dayjs__WEBPACK_IMPORTED_MODULE_3___default()(patient.birthdate), \"year\");\n        // Get active conditions (no stop date or stop date in future)\n        const activeConditions = patient.conditions.filter((c)=>!c.stop || new Date(c.stop) > new Date());\n        // Get active medications\n        const activeMedications = patient.medications.filter((m)=>!m.stop || new Date(m.stop) > new Date());\n        // Count encounters by type\n        const encountersByType = {};\n        patient.encounters.forEach((e)=>{\n            encountersByType[e.description] = (encountersByType[e.description] || 0) + 1;\n        });\n        // Most recent encounters (up to 3)\n        const recentEncounters = [\n            ...patient.encounters\n        ].sort((a, b)=>new Date(b.start).getTime() - new Date(a.start).getTime()).slice(0, 3);\n        // Construct prompt for Gemini\n        const prompt = `\r\nGenerate a concise medical summary of this patient based on the following data. I need TWO separate sections:\r\n\r\n1. Clinical Summary: Summarize the patient's profile, key conditions, medications, and encounter history in 1-2 paragraphs.\r\n\r\n2. Possible Issues: Identify any potential problems or gaps in care based on the data. For example: untreated conditions, medication issues, concerning patterns in encounters, or any other red flags. Be specific about what issues you see and why they're concerning.\r\n\r\nIMPORTANT INSTRUCTIONS:\r\n- DO NOT use the patient's name in your summary. Instead, refer to them as \"the patient\" or \"this patient\".\r\n- Use markdown formatting for emphasis (e.g., **bold** for important findings or _italics_ for medical terms).\r\n- Format lists with bullet points using markdown (* item) when appropriate.\r\n- Keep your response well-structured and easy to read.\r\n- This is request #${Date.now()}-${Math.floor(Math.random() * 1000)}. Generate a unique analysis.\r\n\r\nPatient ID: ${patient.id}\r\nName: ${patient.first} ${patient.last}\r\nAge: ${age} years\r\nGender: ${patient.gender}\r\nRace: ${patient.race}\r\nEthnicity: ${patient.ethnicity}\r\n\r\nActive Conditions (${activeConditions.length}):\r\n${activeConditions.map((c)=>`- ${c.description} (since ${new Date(c.start).toLocaleDateString()})`).join(\"\\n\")}\r\n\r\nAll Conditions (${patient.conditions.length}):\r\n${patient.conditions.map((c)=>`- ${c.description} (${new Date(c.start).toLocaleDateString()} to ${c.stop ? new Date(c.stop).toLocaleDateString() : \"Active\"})`).join(\"\\n\")}\r\n\r\nActive Medications (${activeMedications.length}):\r\n${activeMedications.map((m)=>`- ${m.description} (since ${new Date(m.start).toLocaleDateString()})`).join(\"\\n\")}\r\n\r\nAll Medications (${patient.medications.length}):\r\n${patient.medications.map((m)=>`- ${m.description} (${new Date(m.start).toLocaleDateString()} to ${m.stop ? new Date(m.stop).toLocaleDateString() : \"Active\"})`).join(\"\\n\")}\r\n\r\nTotal Encounters: ${patient.encounters.length}\r\nMost Common Encounter Types:\r\n${Object.entries(encountersByType).sort(([, a], [, b])=>b - a).slice(0, 3).map(([type, count])=>`- ${type}: ${count}`).join(\"\\n\")}\r\n\r\nRecent Encounters:\r\n${recentEncounters.map((e)=>`- ${new Date(e.start).toLocaleDateString()}: ${e.description}`).join(\"\\n\")}\r\n\r\nMake the summary concise but informative, highlighting the most clinically relevant details.\r\nFor the \"Possible Issues\" section, be analytical and focus on identifying potential gaps in care, concerning patterns, or health risks.\r\n`;\n        // Call Gemini API\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-2.0-flash\"\n        });\n        const result = await model.generateContent(prompt);\n        const response = await result.response;\n        const summary = response.text();\n        // Parse the summary to get each section\n        const sectionMatch = summary.match(/Clinical Summary:([\\s\\S]*?)(?:Possible Issues:|$)([\\s\\S]*)/);\n        // Clean up captured sections\n        let clinicalSummaryText = sectionMatch?.[1]?.trim() || \"No clinical summary available\";\n        let possibleIssuesText = sectionMatch?.[2]?.trim() || \"No issues identified\";\n        // Remove potential leading/trailing markdown artifacts or leftover numbering\n        clinicalSummaryText = clinicalSummaryText.replace(/^\\*\\*|\\*\\*$/gm, \"\") // Remove starting/ending **\n        .replace(/\\*\\*\\d+\\.?$/gm, \"\") // Remove **2. at the end\n        .replace(/\\d+\\.\\s*$/gm, \"\") // Remove 2. at the end\n        .trim();\n        possibleIssuesText = possibleIssuesText.replace(/^\\*\\*|\\*\\*$/gm, \"\") // Remove starting/ending **\n        .replace(/Possible Issues:/gi, \"\") // Remove header if captured\n        .trim();\n        // Structure the response\n        const structuredSummary = {\n            clinicalSummary: clinicalSummaryText,\n            possibleIssues: possibleIssuesText,\n            fullText: summary\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            summary: structuredSummary\n        });\n    } catch (error) {\n        console.error(`Error processing patient summary for ${id}:`, error);\n        if (error instanceof Error && error.message.includes(\"API key\")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid API Key or API error.\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate patient summary.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wYXRpZW50cy9baWRdL3N1bW1hcml6ZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDSTtBQUNZO0FBQ2pDO0FBRTFCLE1BQU1JLFFBQVEsSUFBSUYscUVBQWtCQSxDQUFDRyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtBQUU1RCxlQUFlQyxJQUNwQkMsT0FBZ0IsRUFDaEIsRUFBRUMsTUFBTSxFQUE4QjtJQUV0QyxNQUFNLEVBQUVDLEVBQUUsRUFBRSxHQUFHRDtJQUVmLElBQUksQ0FBQ0wsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLEVBQUU7UUFDL0JLLFFBQVFDLEtBQUssQ0FBQztRQUNkLE9BQU9iLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7WUFBRUQsT0FBTztRQUErQyxHQUFHO1lBQUVFLFFBQVE7UUFBSTtJQUNwRztJQUVBLElBQUk7UUFDRixnRkFBZ0Y7UUFDaEYsTUFBTUMsVUFBVSxNQUFNZixtREFBTUEsQ0FBQ2UsT0FBTyxDQUFDQyxVQUFVLENBQUM7WUFDOUNDLE9BQU87Z0JBQUVQO1lBQUc7WUFDWlEsU0FBUztnQkFDUEMsWUFBWTtnQkFDWkMsYUFBYTtnQkFDYkMsWUFBWTtZQUNkO1FBQ0Y7UUFFQSxJQUFJLENBQUNOLFNBQVM7WUFDWixPQUFPaEIscURBQVlBLENBQUNjLElBQUksQ0FBQztnQkFBRUQsT0FBTztZQUFvQixHQUFHO2dCQUFFRSxRQUFRO1lBQUk7UUFDekU7UUFFQSx3QkFBd0I7UUFDeEIsTUFBTVEsTUFBTXBCLDRDQUFLQSxHQUFHcUIsSUFBSSxDQUFDckIsNENBQUtBLENBQUNhLFFBQVFTLFNBQVMsR0FBRztRQUVuRCw4REFBOEQ7UUFDOUQsTUFBTUMsbUJBQW1CVixRQUFRSSxVQUFVLENBQUNPLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBSyxDQUFDQSxFQUFFQyxJQUFJLElBQUksSUFBSUMsS0FBS0YsRUFBRUMsSUFBSSxJQUFJLElBQUlDO1FBRTFGLHlCQUF5QjtRQUN6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QSxPQUFPLENBQUMsc0JBQXNCLElBQUksNEJBQTRCO1NBQzlERixJQUFJO1FBRVAseUJBQXlCO1FBQ3pCLE1BQU1HLG9CQUFvQjtZQUN4QkMsaUJBQWlCTDtZQUNqQk0sZ0JBQWdCSjtZQUNoQkssVUFBVVg7UUFDWjtRQUVBLE9BQU9uRSxxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQUVxRCxTQUFTUTtRQUFrQjtJQUV4RCxFQUFFLE9BQU85RCxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxDQUFDLHFDQUFxQyxFQUFFRixHQUFHLENBQUMsQ0FBQyxFQUFFRTtRQUM3RCxJQUFJQSxpQkFBaUJrRSxTQUFTbEUsTUFBTW1FLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLFlBQVk7WUFDL0QsT0FBT2pGLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7Z0JBQUVELE9BQU87WUFBZ0MsR0FBRztnQkFBRUUsUUFBUTtZQUFJO1FBQ3JGO1FBQ0EsT0FBT2YscURBQVlBLENBQUNjLElBQUksQ0FBQztZQUFFRCxPQUFPO1FBQXNDLEdBQUc7WUFBRUUsUUFBUTtRQUFJO0lBQzNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbWlkLWNsdXN0ZXItZGFzaGJvYXJkLy4vc3JjL2FwcC9hcGkvcGF0aWVudHMvW2lkXS9zdW1tYXJpemUvcm91dGUudHM/YzdhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCBwcmlzbWEgZnJvbSAnLi4vLi4vLi4vLi4vLi4vbGliL3ByaXNtYSc7XHJcbmltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gJ0Bnb29nbGUvZ2VuZXJhdGl2ZS1haSc7XHJcbmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7XHJcblxyXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgJycpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcclxuICByZXF1ZXN0OiBSZXF1ZXN0LFxyXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XHJcbikge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHBhcmFtcztcclxuXHJcbiAgaWYgKCFwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSkge1xyXG4gICAgY29uc29sZS5lcnJvcignR0VNSU5JX0FQSV9LRVkgaXMgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1NlcnZlciBjb25maWd1cmF0aW9uIGVycm9yOiBNaXNzaW5nIEFQSSBLZXkuJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIGRldGFpbGVkIHBhdGllbnQgZGF0YSBpbmNsdWRpbmcgY29uZGl0aW9ucywgbWVkaWNhdGlvbnMsIGFuZCBlbmNvdW50ZXJzXHJcbiAgICBjb25zdCBwYXRpZW50ID0gYXdhaXQgcHJpc21hLnBhdGllbnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICBjb25kaXRpb25zOiB0cnVlLFxyXG4gICAgICAgIG1lZGljYXRpb25zOiB0cnVlLFxyXG4gICAgICAgIGVuY291bnRlcnM6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXBhdGllbnQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdQYXRpZW50IG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgcGF0aWVudCBhZ2VcclxuICAgIGNvbnN0IGFnZSA9IGRheWpzKCkuZGlmZihkYXlqcyhwYXRpZW50LmJpcnRoZGF0ZSksICd5ZWFyJyk7XHJcblxyXG4gICAgLy8gR2V0IGFjdGl2ZSBjb25kaXRpb25zIChubyBzdG9wIGRhdGUgb3Igc3RvcCBkYXRlIGluIGZ1dHVyZSlcclxuICAgIGNvbnN0IGFjdGl2ZUNvbmRpdGlvbnMgPSBwYXRpZW50LmNvbmRpdGlvbnMuZmlsdGVyKGMgPT4gIWMuc3RvcCB8fCBuZXcgRGF0ZShjLnN0b3ApID4gbmV3IERhdGUoKSk7XHJcbiAgICBcclxuICAgIC8vIEdldCBhY3RpdmUgbWVkaWNhdGlvbnNcclxuICAgIGNvbnN0IGFjdGl2ZU1lZGljYXRpb25zID0gcGF0aWVudC5tZWRpY2F0aW9ucy5maWx0ZXIobSA9PiAhbS5zdG9wIHx8IG5ldyBEYXRlKG0uc3RvcCkgPiBuZXcgRGF0ZSgpKTtcclxuICAgIFxyXG4gICAgLy8gQ291bnQgZW5jb3VudGVycyBieSB0eXBlXHJcbiAgICBjb25zdCBlbmNvdW50ZXJzQnlUeXBlOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbiAgICBwYXRpZW50LmVuY291bnRlcnMuZm9yRWFjaChlID0+IHtcclxuICAgICAgZW5jb3VudGVyc0J5VHlwZVtlLmRlc2NyaXB0aW9uXSA9IChlbmNvdW50ZXJzQnlUeXBlW2UuZGVzY3JpcHRpb25dIHx8IDApICsgMTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE1vc3QgcmVjZW50IGVuY291bnRlcnMgKHVwIHRvIDMpXHJcbiAgICBjb25zdCByZWNlbnRFbmNvdW50ZXJzID0gWy4uLnBhdGllbnQuZW5jb3VudGVyc11cclxuICAgICAgLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuc3RhcnQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuc3RhcnQpLmdldFRpbWUoKSlcclxuICAgICAgLnNsaWNlKDAsIDMpO1xyXG5cclxuICAgIC8vIENvbnN0cnVjdCBwcm9tcHQgZm9yIEdlbWluaVxyXG4gICAgY29uc3QgcHJvbXB0ID0gYFxyXG5HZW5lcmF0ZSBhIGNvbmNpc2UgbWVkaWNhbCBzdW1tYXJ5IG9mIHRoaXMgcGF0aWVudCBiYXNlZCBvbiB0aGUgZm9sbG93aW5nIGRhdGEuIEkgbmVlZCBUV08gc2VwYXJhdGUgc2VjdGlvbnM6XHJcblxyXG4xLiBDbGluaWNhbCBTdW1tYXJ5OiBTdW1tYXJpemUgdGhlIHBhdGllbnQncyBwcm9maWxlLCBrZXkgY29uZGl0aW9ucywgbWVkaWNhdGlvbnMsIGFuZCBlbmNvdW50ZXIgaGlzdG9yeSBpbiAxLTIgcGFyYWdyYXBocy5cclxuXHJcbjIuIFBvc3NpYmxlIElzc3VlczogSWRlbnRpZnkgYW55IHBvdGVudGlhbCBwcm9ibGVtcyBvciBnYXBzIGluIGNhcmUgYmFzZWQgb24gdGhlIGRhdGEuIEZvciBleGFtcGxlOiB1bnRyZWF0ZWQgY29uZGl0aW9ucywgbWVkaWNhdGlvbiBpc3N1ZXMsIGNvbmNlcm5pbmcgcGF0dGVybnMgaW4gZW5jb3VudGVycywgb3IgYW55IG90aGVyIHJlZCBmbGFncy4gQmUgc3BlY2lmaWMgYWJvdXQgd2hhdCBpc3N1ZXMgeW91IHNlZSBhbmQgd2h5IHRoZXkncmUgY29uY2VybmluZy5cclxuXHJcbklNUE9SVEFOVCBJTlNUUlVDVElPTlM6XHJcbi0gRE8gTk9UIHVzZSB0aGUgcGF0aWVudCdzIG5hbWUgaW4geW91ciBzdW1tYXJ5LiBJbnN0ZWFkLCByZWZlciB0byB0aGVtIGFzIFwidGhlIHBhdGllbnRcIiBvciBcInRoaXMgcGF0aWVudFwiLlxyXG4tIFVzZSBtYXJrZG93biBmb3JtYXR0aW5nIGZvciBlbXBoYXNpcyAoZS5nLiwgKipib2xkKiogZm9yIGltcG9ydGFudCBmaW5kaW5ncyBvciBfaXRhbGljc18gZm9yIG1lZGljYWwgdGVybXMpLlxyXG4tIEZvcm1hdCBsaXN0cyB3aXRoIGJ1bGxldCBwb2ludHMgdXNpbmcgbWFya2Rvd24gKCogaXRlbSkgd2hlbiBhcHByb3ByaWF0ZS5cclxuLSBLZWVwIHlvdXIgcmVzcG9uc2Ugd2VsbC1zdHJ1Y3R1cmVkIGFuZCBlYXN5IHRvIHJlYWQuXHJcbi0gVGhpcyBpcyByZXF1ZXN0ICMke0RhdGUubm93KCl9LSR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCl9LiBHZW5lcmF0ZSBhIHVuaXF1ZSBhbmFseXNpcy5cclxuXHJcblBhdGllbnQgSUQ6ICR7cGF0aWVudC5pZH1cclxuTmFtZTogJHtwYXRpZW50LmZpcnN0fSAke3BhdGllbnQubGFzdH1cclxuQWdlOiAke2FnZX0geWVhcnNcclxuR2VuZGVyOiAke3BhdGllbnQuZ2VuZGVyfVxyXG5SYWNlOiAke3BhdGllbnQucmFjZX1cclxuRXRobmljaXR5OiAke3BhdGllbnQuZXRobmljaXR5fVxyXG5cclxuQWN0aXZlIENvbmRpdGlvbnMgKCR7YWN0aXZlQ29uZGl0aW9ucy5sZW5ndGh9KTpcclxuJHthY3RpdmVDb25kaXRpb25zLm1hcChjID0+IGAtICR7Yy5kZXNjcmlwdGlvbn0gKHNpbmNlICR7bmV3IERhdGUoYy5zdGFydCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9KWApLmpvaW4oJ1xcbicpfVxyXG5cclxuQWxsIENvbmRpdGlvbnMgKCR7cGF0aWVudC5jb25kaXRpb25zLmxlbmd0aH0pOlxyXG4ke3BhdGllbnQuY29uZGl0aW9ucy5tYXAoYyA9PiBgLSAke2MuZGVzY3JpcHRpb259ICgke25ldyBEYXRlKGMuc3RhcnQpLnRvTG9jYWxlRGF0ZVN0cmluZygpfSB0byAke2Muc3RvcCA/IG5ldyBEYXRlKGMuc3RvcCkudG9Mb2NhbGVEYXRlU3RyaW5nKCkgOiAnQWN0aXZlJ30pYCkuam9pbignXFxuJyl9XHJcblxyXG5BY3RpdmUgTWVkaWNhdGlvbnMgKCR7YWN0aXZlTWVkaWNhdGlvbnMubGVuZ3RofSk6XHJcbiR7YWN0aXZlTWVkaWNhdGlvbnMubWFwKG0gPT4gYC0gJHttLmRlc2NyaXB0aW9ufSAoc2luY2UgJHtuZXcgRGF0ZShtLnN0YXJ0KS50b0xvY2FsZURhdGVTdHJpbmcoKX0pYCkuam9pbignXFxuJyl9XHJcblxyXG5BbGwgTWVkaWNhdGlvbnMgKCR7cGF0aWVudC5tZWRpY2F0aW9ucy5sZW5ndGh9KTpcclxuJHtwYXRpZW50Lm1lZGljYXRpb25zLm1hcChtID0+IGAtICR7bS5kZXNjcmlwdGlvbn0gKCR7bmV3IERhdGUobS5zdGFydCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9IHRvICR7bS5zdG9wID8gbmV3IERhdGUobS5zdG9wKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6ICdBY3RpdmUnfSlgKS5qb2luKCdcXG4nKX1cclxuXHJcblRvdGFsIEVuY291bnRlcnM6ICR7cGF0aWVudC5lbmNvdW50ZXJzLmxlbmd0aH1cclxuTW9zdCBDb21tb24gRW5jb3VudGVyIFR5cGVzOlxyXG4ke09iamVjdC5lbnRyaWVzKGVuY291bnRlcnNCeVR5cGUpXHJcbiAgLnNvcnQoKFssIGFdLCBbLCBiXSkgPT4gYiAtIGEpXHJcbiAgLnNsaWNlKDAsIDMpXHJcbiAgLm1hcCgoW3R5cGUsIGNvdW50XSkgPT4gYC0gJHt0eXBlfTogJHtjb3VudH1gKVxyXG4gIC5qb2luKCdcXG4nKX1cclxuXHJcblJlY2VudCBFbmNvdW50ZXJzOlxyXG4ke3JlY2VudEVuY291bnRlcnMubWFwKGUgPT4gYC0gJHtuZXcgRGF0ZShlLnN0YXJ0KS50b0xvY2FsZURhdGVTdHJpbmcoKX06ICR7ZS5kZXNjcmlwdGlvbn1gKS5qb2luKCdcXG4nKX1cclxuXHJcbk1ha2UgdGhlIHN1bW1hcnkgY29uY2lzZSBidXQgaW5mb3JtYXRpdmUsIGhpZ2hsaWdodGluZyB0aGUgbW9zdCBjbGluaWNhbGx5IHJlbGV2YW50IGRldGFpbHMuXHJcbkZvciB0aGUgXCJQb3NzaWJsZSBJc3N1ZXNcIiBzZWN0aW9uLCBiZSBhbmFseXRpY2FsIGFuZCBmb2N1cyBvbiBpZGVudGlmeWluZyBwb3RlbnRpYWwgZ2FwcyBpbiBjYXJlLCBjb25jZXJuaW5nIHBhdHRlcm5zLCBvciBoZWFsdGggcmlza3MuXHJcbmA7XHJcblxyXG4gICAgLy8gQ2FsbCBHZW1pbmkgQVBJXHJcbiAgICBjb25zdCBtb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiBcImdlbWluaS0yLjAtZmxhc2hcIiB9KTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChwcm9tcHQpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQucmVzcG9uc2U7XHJcbiAgICBjb25zdCBzdW1tYXJ5ID0gcmVzcG9uc2UudGV4dCgpO1xyXG5cclxuICAgIC8vIFBhcnNlIHRoZSBzdW1tYXJ5IHRvIGdldCBlYWNoIHNlY3Rpb25cclxuICAgIGNvbnN0IHNlY3Rpb25NYXRjaCA9IHN1bW1hcnkubWF0Y2goL0NsaW5pY2FsIFN1bW1hcnk6KFtcXHNcXFNdKj8pKD86UG9zc2libGUgSXNzdWVzOnwkKShbXFxzXFxTXSopLyk7XHJcbiAgICBcclxuICAgIC8vIENsZWFuIHVwIGNhcHR1cmVkIHNlY3Rpb25zXHJcbiAgICBsZXQgY2xpbmljYWxTdW1tYXJ5VGV4dCA9IHNlY3Rpb25NYXRjaD8uWzFdPy50cmltKCkgfHwgJ05vIGNsaW5pY2FsIHN1bW1hcnkgYXZhaWxhYmxlJztcclxuICAgIGxldCBwb3NzaWJsZUlzc3Vlc1RleHQgPSBzZWN0aW9uTWF0Y2g/LlsyXT8udHJpbSgpIHx8ICdObyBpc3N1ZXMgaWRlbnRpZmllZCc7XHJcblxyXG4gICAgLy8gUmVtb3ZlIHBvdGVudGlhbCBsZWFkaW5nL3RyYWlsaW5nIG1hcmtkb3duIGFydGlmYWN0cyBvciBsZWZ0b3ZlciBudW1iZXJpbmdcclxuICAgIGNsaW5pY2FsU3VtbWFyeVRleHQgPSBjbGluaWNhbFN1bW1hcnlUZXh0XHJcbiAgICAgIC5yZXBsYWNlKC9eXFwqXFwqfFxcKlxcKiQvZ20sICcnKSAvLyBSZW1vdmUgc3RhcnRpbmcvZW5kaW5nICoqXHJcbiAgICAgIC5yZXBsYWNlKC9cXCpcXCpcXGQrXFwuPyQvZ20sICcnKSAvLyBSZW1vdmUgKioyLiBhdCB0aGUgZW5kXHJcbiAgICAgIC5yZXBsYWNlKC9cXGQrXFwuXFxzKiQvZ20sICcnKSAvLyBSZW1vdmUgMi4gYXQgdGhlIGVuZFxyXG4gICAgICAudHJpbSgpO1xyXG4gICAgXHJcbiAgICBwb3NzaWJsZUlzc3Vlc1RleHQgPSBwb3NzaWJsZUlzc3Vlc1RleHRcclxuICAgICAgLnJlcGxhY2UoL15cXCpcXCp8XFwqXFwqJC9nbSwgJycpIC8vIFJlbW92ZSBzdGFydGluZy9lbmRpbmcgKipcclxuICAgICAgLnJlcGxhY2UoL1Bvc3NpYmxlIElzc3VlczovZ2ksICcnKSAvLyBSZW1vdmUgaGVhZGVyIGlmIGNhcHR1cmVkXHJcbiAgICAgIC50cmltKCk7XHJcblxyXG4gICAgLy8gU3RydWN0dXJlIHRoZSByZXNwb25zZVxyXG4gICAgY29uc3Qgc3RydWN0dXJlZFN1bW1hcnkgPSB7XHJcbiAgICAgIGNsaW5pY2FsU3VtbWFyeTogY2xpbmljYWxTdW1tYXJ5VGV4dCxcclxuICAgICAgcG9zc2libGVJc3N1ZXM6IHBvc3NpYmxlSXNzdWVzVGV4dCxcclxuICAgICAgZnVsbFRleHQ6IHN1bW1hcnlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VtbWFyeTogc3RydWN0dXJlZFN1bW1hcnkgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHBhdGllbnQgc3VtbWFyeSBmb3IgJHtpZH06YCwgZXJyb3IpO1xyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnQVBJIGtleScpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBBUEkgS2V5IG9yIEFQSSBlcnJvci4nIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBwYXRpZW50IHN1bW1hcnkuJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiZGF5anMiLCJnZW5BSSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsIkdFVCIsInJlcXVlc3QiLCJwYXJhbXMiLCJpZCIsImNvbnNvbGUiLCJlcnJvciIsImpzb24iLCJzdGF0dXMiLCJwYXRpZW50IiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsImNvbmRpdGlvbnMiLCJtZWRpY2F0aW9ucyIsImVuY291bnRlcnMiLCJhZ2UiLCJkaWZmIiwiYmlydGhkYXRlIiwiYWN0aXZlQ29uZGl0aW9ucyIsImZpbHRlciIsImMiLCJzdG9wIiwiRGF0ZSIsImFjdGl2ZU1lZGljYXRpb25zIiwibSIsImVuY291bnRlcnNCeVR5cGUiLCJmb3JFYWNoIiwiZSIsImRlc2NyaXB0aW9uIiwicmVjZW50RW5jb3VudGVycyIsInNvcnQiLCJhIiwiYiIsInN0YXJ0IiwiZ2V0VGltZSIsInNsaWNlIiwicHJvbXB0Iiwibm93IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZmlyc3QiLCJsYXN0IiwiZ2VuZGVyIiwicmFjZSIsImV0aG5pY2l0eSIsImxlbmd0aCIsIm1hcCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImpvaW4iLCJPYmplY3QiLCJlbnRyaWVzIiwidHlwZSIsImNvdW50IiwibW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJyZXNwb25zZSIsInN1bW1hcnkiLCJ0ZXh0Iiwic2VjdGlvbk1hdGNoIiwibWF0Y2giLCJjbGluaWNhbFN1bW1hcnlUZXh0IiwidHJpbSIsInBvc3NpYmxlSXNzdWVzVGV4dCIsInJlcGxhY2UiLCJzdHJ1Y3R1cmVkU3VtbWFyeSIsImNsaW5pY2FsU3VtbWFyeSIsInBvc3NpYmxlSXNzdWVzIiwiZnVsbFRleHQiLCJFcnJvciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/patients/[id]/summarize/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Define global type for PrismaClient\nconst globalForPrisma = global;\n// Use absolute path for database\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_1___default().resolve(process.cwd(), \"prisma/dev.db\");\nconst url = `file:${dbPath}`;\n// Create a singleton instance of the Prisma client\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"error\"\n    ] : 0,\n    datasources: {\n        db: {\n            url\n        }\n    }\n});\n// Save the instance to the global object in non-production environments\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkM7QUFDdEI7QUFFdkIsc0NBQXNDO0FBQ3RDLE1BQU1FLGtCQUFrQkM7QUFFeEIsaUNBQWlDO0FBQ2pDLE1BQU1DLFNBQVNILG1EQUFZLENBQUNLLFFBQVFDLEdBQUcsSUFBSTtBQUMzQyxNQUFNQyxNQUFNLENBQUMsS0FBSyxFQUFFSixPQUFPLENBQUM7QUFFNUIsbURBQW1EO0FBQzVDLE1BQU1LLFNBQ1hQLGdCQUFnQk8sTUFBTSxJQUN0QixJQUFJVCx3REFBWUEsQ0FBQztJQUNmVSxLQUFLSixLQUF5QixHQUFnQjtRQUFDO0tBQVEsR0FBRyxDQUFFO0lBQzVESyxhQUFhO1FBQ1hDLElBQUk7WUFDRko7UUFDRjtJQUNGO0FBQ0YsR0FBRTtBQUVKLHdFQUF3RTtBQUN4RSxJQUFJRixJQUF5QixFQUFjO0lBQ3pDSixnQkFBZ0JPLE1BQU0sR0FBR0E7QUFDM0I7QUFFQSxpRUFBZUEsTUFBTUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ltaWQtY2x1c3Rlci1kYXNoYm9hcmQvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5cclxuLy8gRGVmaW5lIGdsb2JhbCB0eXBlIGZvciBQcmlzbWFDbGllbnRcclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9XHJcblxyXG4vLyBVc2UgYWJzb2x1dGUgcGF0aCBmb3IgZGF0YWJhc2VcclxuY29uc3QgZGJQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICdwcmlzbWEvZGV2LmRiJylcclxuY29uc3QgdXJsID0gYGZpbGU6JHtkYlBhdGh9YFxyXG5cclxuLy8gQ3JlYXRlIGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoZSBQcmlzbWEgY2xpZW50XHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgfHxcclxuICBuZXcgUHJpc21hQ2xpZW50KHtcclxuICAgIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ2Vycm9yJ10gOiBbXSxcclxuICAgIGRhdGFzb3VyY2VzOiB7XHJcbiAgICAgIGRiOiB7XHJcbiAgICAgICAgdXJsLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICB9KVxyXG5cclxuLy8gU2F2ZSB0aGUgaW5zdGFuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QgaW4gbm9uLXByb2R1Y3Rpb24gZW52aXJvbm1lbnRzXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwcmlzbWEgIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInBhdGgiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWwiLCJkYlBhdGgiLCJyZXNvbHZlIiwicHJvY2VzcyIsImN3ZCIsInVybCIsInByaXNtYSIsImxvZyIsImRhdGFzb3VyY2VzIiwiZGIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@google","vendor-chunks/dayjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&page=%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2F%5Bid%5D%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cdanie%5CDocuments%5CProjects%5Cimid-cluster-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();